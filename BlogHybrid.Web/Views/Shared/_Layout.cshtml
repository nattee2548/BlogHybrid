<!DOCTYPE html>
<html lang="th" data-theme="light">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0" />
    
    <!-- SEO Meta Tags -->
    <partial name="_SeoMetaTags" />
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3EüöÄ%3C/text%3E%3C/svg%3E">
    
    <!-- 1. Theme CSS Variables (MUST BE FIRST for proper CSS variable loading) -->
    <link rel="stylesheet" href="~/css/themes/light-mode.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/themes/dark-mode.css" asp-append-version="true" />
    
    <!-- 2. Main Theme Styles -->
    <link rel="stylesheet" href="~/css/themes/main-theme.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/themes/theme-switcher.css" asp-append-version="true" />
    
    <!-- 3. Responsive CSS Framework -->
    <link rel="stylesheet" href="~/css/responsive/breakpoints.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/responsive/utilities.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/responsive/responsive.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/responsive/touch.css" asp-append-version="true" />
    
    <!-- 4. Navbar Fix (MUST BE LAST to override responsive rules) -->
    <link rel="stylesheet" href="~/css/navbar-fix.css" asp-append-version="true" />
    
    <!-- Load theme ASAP to prevent flash of unstyled content -->
    <script>
        (function() {
            const theme = localStorage.getItem('main-theme-preference') || 'auto';
            let actualTheme = theme;
            if (theme === 'auto') {
                actualTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
            }
            document.documentElement.setAttribute('data-theme', actualTheme);
        })();
    </script>
</head>
<body class="main-layout">
    <!-- Navbar -->
    <header class="main-header">
        <nav class="main-navbar">
            <div class="main-container" style="max-width: 1280px; margin: 0 auto; padding: 0 16px;">
                <div style="display: flex; align-items: center; justify-content: space-between; height: 56px;">
                    <!-- Logo & Brand -->
                    <div style="display: flex; align-items: center; gap: 16px;">
                        <a asp-area="" asp-controller="Home" asp-action="Index" style="text-decoration: none;">
                            <div class="main-logo" style="display: flex; align-items: center; gap: 8px;">
                                <svg width="32" height="32" viewBox="0 0 32 32" fill="currentColor" style="color: var(--primary);">
                                    <circle cx="16" cy="16" r="14" fill="currentColor"/>
                                    <path d="M16 8c-4.4 0-8 3.6-8 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm0 14c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6z" fill="white"/>
                                    <circle cx="16" cy="14" r="2" fill="white"/>
                                </svg>
                                <span style="font-size: 20px; font-weight: 700; color: var(--text-primary);">BlogHybrid</span>
                            </div>
                        </a>
                        
                        <!-- Navigation Links -->
                        <div class="main-nav-links">
                            <a asp-area="" asp-controller="Home" asp-action="Index" class="main-btn-outline">
                                ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å
                            </a>
                            <a asp-area="" asp-controller="Home" asp-action="Privacy" class="main-btn-outline">
                                ‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢
                            </a>
                        </div>
                    </div>
                    
                    <!-- Search Bar -->
                    <div class="main-search" style="flex: 1; max-width: 600px; margin: 0 24px;">
                        <form style="position: relative;">
                            <input type="text" 
                                   placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÉ‡∏ô BlogHybrid" 
                                   style="width: 100%; padding: 8px 40px 8px 16px; border: 1px solid var(--border-primary); border-radius: 4px; background: var(--input-bg); color: var(--input-text); font-size: 14px;"
                                   />
                            <button type="submit" style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer;">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="var(--text-secondary)">
                                    <path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" stroke-width="2"/>
                                </svg>
                            </button>
                        </form>
                    </div>
                    
                    <!-- Right Actions -->
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <!-- Theme Switcher -->
                        <button class="main-btn-icon" id="themeToggle" aria-label="‡∏™‡∏•‡∏±‡∏ö‡∏ò‡∏µ‡∏°" title="‡∏™‡∏•‡∏±‡∏ö‡∏ò‡∏µ‡∏°">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <!-- Sun icon (will be shown in light mode) -->
                                <path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"/>
                            </svg>
                        </button>
                        
                        <a asp-area="" asp-controller="Account" asp-action="AdminLogin" class="main-btn-primary" style="text-decoration: none;">
                            ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
                        </a>
                    </div>
                </div>
            </div>
        </nav>
    </header>
    
    <!-- Main Content Area -->
    <div class="main-main">
        <!-- Content -->
        <main role="main" class="main-content">
            @RenderBody()
        </main>
        
        <!-- Sidebar -->
        <aside class="main-sidebar">
            <!-- Popular Communities Card -->
            <div class="main-sidebar-card">
                <div class="main-sidebar-header">
                    <h3 class="main-sidebar-title">‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°</h3>
                </div>
                <div class="main-sidebar-content" style="padding: 0;">
                    <a href="#" class="main-community-info" style="text-decoration: none;">
                        <div class="main-community-icon" style="background: var(--primary);">B</div>
                        <div class="main-community-details">
                            <h3>r/BlogHybrid</h3>
                            <p>12K ‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</p>
                        </div>
                    </a>
                    <div class="main-divider" style="margin: 0 12px;"></div>
                    <a href="#" class="main-community-info" style="text-decoration: none;">
                        <div class="main-community-icon" style="background: #ff4500;">T</div>
                        <div class="main-community-details">
                            <h3>r/Technology</h3>
                            <p>8.5K ‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</p>
                        </div>
                    </a>
                    <div class="main-divider" style="margin: 0 12px;"></div>
                    <a href="#" class="main-community-info" style="text-decoration: none;">
                        <div class="main-community-icon" style="background: #46d160;">W</div>
                        <div class="main-community-details">
                            <h3>r/WebDev</h3>
                            <p>3.8K ‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</p>
                        </div>
                    </a>
                </div>
            </div>
            
            <!-- Footer Links in Sidebar -->
            <div class="main-sidebar-card" style="font-size: 12px;">
                <div class="main-sidebar-content">
                    <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 12px;">
                        <a href="#" style="color: var(--text-secondary);">‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö</a>
                        <span style="color: var(--text-tertiary);">‚Ä¢</span>
                        <a href="#" style="color: var(--text-secondary);">‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠</a>
                        <span style="color: var(--text-tertiary);">‚Ä¢</span>
                        <a href="#" style="color: var(--text-secondary);">API</a>
                        <span style="color: var(--text-tertiary);">‚Ä¢</span>
                        <a asp-controller="Home" asp-action="Privacy" style="color: var(--text-secondary);">‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢</a>
                    </div>
                    <div style="color: var(--text-tertiary);">
                        ¬© @DateTime.Now.Year 404alk
                    </div>
                </div>
            </div>
        </aside>
    </div>
    
    <!-- Scripts -->
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    <script src="~/js/mobile-menu.js" asp-append-version="true"></script>
    
    <!-- Theme Switcher Script (MUST BE LOADED) -->
    <script src="~/js/theme-switcher.js" asp-append-version="true"></script>
    
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
