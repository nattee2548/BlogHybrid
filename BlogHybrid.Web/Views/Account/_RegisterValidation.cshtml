@model BlogHybrid.Web.Models.ViewModels.RegisterViewModel

<div id="register-form-container">
    <form hx-post="@Url.Action("Register", "Account")"
          hx-target="#register-form-container"
          hx-swap="outerHTML"
          class="auth-form"
          novalidate>

        @Html.AntiForgeryToken()

        @if (!ViewData.ModelState.IsValid)
        {
            @foreach (var modelState in ViewData.ModelState.Where(x => string.IsNullOrEmpty(x.Key)))
            {
                @if (modelState.Value != null && modelState.Value.Errors.Any())
                {
                    <div class="alert alert-danger mb-3">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        @foreach (var error in modelState.Value.Errors)
                        {
                            <div>@error.ErrorMessage</div>
                        }
                    </div>
                }
            }
        }

        <div class="mb-3">
            <label asp-for="DisplayName" class="form-label">
                <i class="fas fa-user me-2"></i>ชื่อที่แสดง
            </label>
            <input asp-for="DisplayName"
                   class="form-control @(ViewData.ModelState["DisplayName"]?.Errors.Any() == true ? "is-invalid" : "")"
                   placeholder="ชื่อที่จะแสดงในเว็บไซต์"
                   tabindex="1"
                   required />
            <span asp-validation-for="DisplayName" class="text-danger small"></span>
        </div>

        <div class="mb-3">
            <label asp-for="Email" class="form-label">
                <i class="fas fa-envelope me-2"></i>อีเมล
            </label>
            <input asp-for="Email"
                   class="form-control @(ViewData.ModelState["Email"]?.Errors.Any() == true ? "is-invalid" : "")"
                   type="email"
                   placeholder="your@email.com"
                   tabindex="2"
                   required />
            <span asp-validation-for="Email" class="text-danger small"></span>
        </div>

        <div class="mb-3">
            <label asp-for="Password" class="form-label">
                <i class="fas fa-lock me-2"></i>รหัสผ่าน
            </label>
            <div class="password-wrapper">
                <input asp-for="Password"
                       class="form-control @(ViewData.ModelState["Password"]?.Errors.Any() == true ? "is-invalid" : "")"
                       type="password"
                       placeholder="อย่างน้อย 6 ตัวอักษร"
                       id="password"
                       tabindex="3"
                       value="@Model.Password"
                       required />
                <button type="button" class="password-toggle" onclick="togglePassword('password')" tabindex="-1">
                    <i class="fas fa-eye" id="password-icon"></i>
                </button>
            </div>
            <span asp-validation-for="Password" class="text-danger small"></span>
        </div>

        <div class="mb-3">
            <label asp-for="ConfirmPassword" class="form-label">
                <i class="fas fa-lock me-2"></i>ยืนยันรหัสผ่าน
            </label>
            <div class="password-wrapper">
                <input asp-for="ConfirmPassword"
                       class="form-control @(ViewData.ModelState["ConfirmPassword"]?.Errors.Any() == true ? "is-invalid" : "")"
                       type="password"
                       placeholder="ยืนยันรหัสผ่าน"
                       id="confirm-password"
                       tabindex="4"
                       value="@Model.ConfirmPassword"
                       required />
                <button type="button" class="password-toggle" onclick="togglePassword('confirm-password')" tabindex="-1">
                    <i class="fas fa-eye" id="confirm-password-icon"></i>
                </button>
            </div>
            <span asp-validation-for="ConfirmPassword" class="text-danger small"></span>
        </div>

        <div class="mb-4">
            <div class="form-check">
                <input asp-for="AcceptTerms"
                       class="form-check-input @(ViewData.ModelState["AcceptTerms"]?.Errors.Any() == true ? "is-invalid" : "")"
                       tabindex="5"
                       required />
                <label asp-for="AcceptTerms" class="form-check-label">
                    ฉันยอมรับ
                    <a href="#" class="text-decoration-none">ข้อกำหนดการใช้งาน</a>
                    และ
                    <a href="#" class="text-decoration-none">นโยบายความเป็นส่วนตัว</a>
                </label>
            </div>
            <span asp-validation-for="AcceptTerms" class="text-danger small"></span>
        </div>

        <button type="submit" class="auth-btn" id="submit-btn" tabindex="6">
            <span class="submit-text">
                <i class="fas fa-user-plus me-2"></i>สร้างบัญชี
            </span>
            <span class="loading-text">
                <span class="spinner-border spinner-border-sm me-2"></span>กำลังสร้างบัญชี...
            </span>
        </button>
    </form>
</div>

<script>
    setupEnterKeyNavigation();
    var firstError = document.querySelector('.is-invalid');
    if (firstError) {
        firstError.focus();
    }
</script>