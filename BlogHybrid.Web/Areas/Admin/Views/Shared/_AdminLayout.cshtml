<!DOCTYPE html>
<html lang="th" data-theme="light">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Admin Dashboard</title>

    <!-- CSS Files -->
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
    <link rel="stylesheet" href="~/css/themes/light-mode.css" />
    <link rel="stylesheet" href="~/css/themes/dark-mode.css" />
    <link rel="stylesheet" href="~/css/themes/theme-switcher.css" />
    <link rel="stylesheet" href="~/css/admin/admin-layout.css" asp-append-version="true" />
    @await RenderSectionAsync("Styles", required: false)
    <!-- Prevent theme flash -->
    <script>
        (function() {
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const actualTheme = savedTheme || (prefersDark ? 'dark' : 'light');
            document.documentElement.setAttribute('data-theme', actualTheme);
        })();
    </script>
</head>
<body class="admin-body">
    <!-- Top Navigation -->
    <nav class="admin-topnav">
        <div class="admin-topnav-left">
            <button class="admin-menu-toggle" id="sidebarToggle">
                <i class="bi bi-list"></i>
            </button>
            <a asp-area="Admin" asp-controller="Dashboard" asp-action="Index" class="admin-brand">
                <i class="bi bi-shield-check"></i>
                <span>Admin Panel</span>
            </a>
        </div>

        <div class="admin-topnav-right">
            <!-- Search -->
            <div class="admin-search">
                <i class="bi bi-search"></i>
                <input type="text" placeholder="ค้นหา..." />
            </div>

            <!-- Notifications -->
            <button class="admin-icon-btn" title="การแจ้งเตือน">
                <i class="bi bi-bell"></i>
                <span class="badge">5</span>
            </button>

            <!-- Theme Switcher -->
            <div class="theme-switcher-container">
                <button class="theme-toggle" role="switch" aria-checked="false">
                    <span class="theme-toggle-ball">
                        <i class="bi bi-sun-fill theme-icon"></i>
                    </span>
                </button>
            </div>

            <!-- User Menu -->
            <div class="admin-user-menu">
                <button class="admin-user-btn">
                    <img src="https://ui-avatars.com/api/?name=@User.Identity.Name&background=random" alt="User" />
                    <span>@User.Identity.Name</span>
                    <i class="bi bi-chevron-down"></i>
                </button>
                <div class="admin-user-dropdown">
                    <a asp-area="" asp-controller="Home" asp-action="Index">
                        <i class="bi bi-house"></i> กลับหน้าหลัก
                    </a>
                    <a href="#">
                        <i class="bi bi-person"></i> โปรไฟล์
                    </a>
                    <a href="#">
                        <i class="bi bi-gear"></i> ตั้งค่า
                    </a>
                    <div class="dropdown-divider"></div>
                    <form asp-area="" asp-controller="Account" asp-action="Logout" method="post">
                        <button type="submit" class="dropdown-item">
                            <i class="bi bi-box-arrow-right"></i> ออกจากระบบ
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </nav>

    <div class="admin-container">
        <!-- Sidebar -->
        <aside class="admin-sidebar" id="adminSidebar">
            <div class="admin-sidebar-menu">
                <!-- Dashboard -->
                <a asp-area="Admin" asp-controller="Dashboard" asp-action="Index" class="admin-menu-item active">
                    <i class="bi bi-speedometer2"></i>
                    <span>Dashboard</span>
                </a>

                <!-- Posts Management -->
                <div class="admin-menu-group">
                    <div class="admin-menu-title">เนื้อหา</div>
                    <a asp-area="Admin" asp-controller="Posts" asp-action="Index" class="admin-menu-item">
                        <i class="bi bi-file-earmark-text"></i>
                        <span>โพสต์</span>
                    </a>
                    <a asp-area="Admin" asp-controller="Categories" asp-action="Index" class="admin-menu-item">
                        <i class="bi bi-folder"></i>
                        <span>หมวดหมู่</span>
                    </a>
                    <a asp-area="Admin" asp-controller="Tags" asp-action="Index" class="admin-menu-item">
                        <i class="bi bi-tags"></i>
                        <span>แท็ก</span>
                    </a>
                    <a asp-area="Admin" asp-controller="Comments" asp-action="Index" class="admin-menu-item">
                        <i class="bi bi-chat-dots"></i>
                        <span>ความคิดเห็น</span>
                    </a>
                </div>

                <!-- Communities -->
                <div class="admin-menu-group">
                    <div class="admin-menu-title">ชุมชน</div>
                    <a asp-area="Admin" asp-controller="Communities" asp-action="Index" class="admin-menu-item">
                        <i class="bi bi-people"></i>
                        <span>ชุมชนทั้งหมด</span>
                    </a>
                </div>

                <!-- Users Management -->
                <div class="admin-menu-group">
                    <div class="admin-menu-title">ผู้ใช้งาน</div>
                    <a asp-area="Admin" asp-controller="Users" asp-action="Index" class="admin-menu-item">
                        <i class="bi bi-person-badge"></i>
                        <span>สมาชิก</span>
                    </a>
                    <a asp-area="Admin" asp-controller="AdminUsers" asp-action="Index" class="admin-menu-item">
                        <i class="bi bi-shield-lock"></i>
                        <span>Admin</span>
                    </a>
                </div>

                <!-- Settings -->
                <div class="admin-menu-group">
                    <div class="admin-menu-title">ตั้งค่า</div>
                    <a asp-area="Admin" asp-controller="Settings" asp-action="Index" class="admin-menu-item">
                        <i class="bi bi-gear"></i>
                        <span>ตั้งค่าทั่วไป</span>
                    </a>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="admin-main">
            <!-- Breadcrumb -->
            <nav class="admin-breadcrumb">
                <ol>
                    <li><a asp-area="Admin" asp-controller="Dashboard" asp-action="Index">Dashboard</a></li>
                    @if (ViewData["Breadcrumb"] != null)
                    {
                        @ViewData["Breadcrumb"]
                    }
                </ol>
            </nav>

            <!-- Page Content -->
            <div class="admin-content">
                @RenderBody()
            </div>
        </main>
    </div>

    <partial name="_ToastNotification" />

    <!-- Scripts -->
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/theme-switcher.js" asp-append-version="true"></script>
    <script src="~/js/admin/admin.js" asp-append-version="true"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>